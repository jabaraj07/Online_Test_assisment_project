{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useRef } from \"react\";\nconst useProctoring = attemptId => {\n  _s();\n  const violationCount = useRef(0);\n  const getBrowserMetadata = () => ({\n    userAgent: navigator.userAgent,\n    platform: navigator.platform,\n    language: navigator.language,\n    screenResolution: `${window.screen.width}x${window.screen.height}`,\n    onlineStatus: navigator.onLine\n  });\n  useEffect(() => {\n    const handleFullscreenChange = () => {\n      if (!document.fullscreenElement) {\n        violationCount.current++;\n        logEvent(attemptId, \"FULLSCREEN_EXIT\", null, getBrowserMetadata());\n        checkViolationLimit();\n      }\n    };\n    document.addEventListener(\"fullscreenchange\", handleFullscreenChange);\n    return () => document.removeEventListener(\"fullscreenchange\", handleFullscreenChange);\n  }, []);\n\n  //   useEffect(() => {\n  //     const handleVisibilityChange = () => {\n  //       if (document.visibilityState === \"hidden\") {\n  //         violationCount.current++;\n\n  //         logEvent(attemptId, \"FOCUS_LOST\", null, {\n  //           visibilityState: document.visibilityState,\n  //         });\n\n  //         checkViolationLimit();\n  //       }\n  //     };\n\n  //     document.addEventListener(\"visibilitychange\", handleVisibilityChange);\n\n  //     return () =>\n  //       document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n  //   }, []);\n\n  useEffect(() => {\n    const handleVisisbilityChange = () => {\n      if (document.hidden) {\n        violationCount.current++;\n        logEvent(attemptId, \"TAB_HIDDEN\", null, {\n          focusState: document.visibilityState,\n          timestamp: new Date().toISOString()\n        });\n        logEvent(attemptId, \"FOCUS_LOST\", null, {\n          visibilityState: document.visibilityState\n        });\n        checkViolationLimit();\n      } else {\n        logEvent(attemptId, \"TAB_VISIBLE\", null, {\n          timestamp: new Date().toISOString(),\n          focusState: document.visibilityState\n        });\n        console.log(\"Tab_visible\");\n      }\n    };\n    document.addEventListener(\"visibilitychange\", handleVisisbilityChange);\n    return () => {\n      document.removeEventListener(\"visibilitychange\", handleVisisbilityChange);\n    };\n  }, []);\n  useEffect(() => {\n    const handleCopy = () => {\n      logEvent({\n        eventType: \"COPY_ATTEMPT\"\n      });\n    };\n    const handlePaste = () => {\n      logEvent({\n        eventType: \"PASTE_ATTEMPT\"\n      });\n    };\n    document.addEventListener(\"copy\", handleCopy);\n    document.addEventListener(\"paste\", handlePaste);\n    return () => {\n      document.removeEventListener(\"copy\", handleCopy);\n      document.removeEventListener(\"paste\", handlePaste);\n    };\n  }, []);\n  useEffect(() => {\n    const handleRightClick = e => {\n      e.preventDefault();\n      logEvent({\n        eventType: \"RIGHT_CLICK_BLOCKED\"\n      });\n    };\n    const handleKeyDown = e => {\n      // Block F12\n      if (e.key === \"F12\") {\n        e.preventDefault();\n        violationCount.current++;\n        logEvent({\n          eventType: \"DEVTOOLS_ATTEMPT\"\n        });\n        checkViolationLimit();\n      }\n\n      // Block Ctrl+C, Ctrl+V, Ctrl+U\n      if (e.ctrlKey && [\"c\", \"v\", \"u\", \"s\"].includes(e.key.toLowerCase())) {\n        e.preventDefault();\n        logEvent({\n          eventType: \"KEYBOARD_SHORTCUT_BLOCKED\",\n          metadata: {\n            key: e.key\n          }\n        });\n      }\n    };\n    document.addEventListener(\"contextmenu\", handleRightClick);\n    document.addEventListener(\"keydown\", handleKeyDown);\n    return () => {\n      document.removeEventListener(\"contextmenu\", handleRightClick);\n      document.removeEventListener(\"keydown\", handleKeyDown);\n    };\n  }, []);\n  const checkViolationLimit = () => {\n    if (violationCount.current >= 3) {\n      logEvent({\n        eventType: \"VIOLATION_LIMIT_REACHED\"\n      });\n      if (onViolationLimitReached) {\n        onViolationLimitReached();\n      }\n    }\n  };\n};\n_s(useProctoring, \"8TYsTfUIkbfvf/azo7uwtUZsMjM=\");\nexport default useProctoring;","map":{"version":3,"names":["useRef","useProctoring","attemptId","_s","violationCount","getBrowserMetadata","userAgent","navigator","platform","language","screenResolution","window","screen","width","height","onlineStatus","onLine","useEffect","handleFullscreenChange","document","fullscreenElement","current","logEvent","checkViolationLimit","addEventListener","removeEventListener","handleVisisbilityChange","hidden","focusState","visibilityState","timestamp","Date","toISOString","console","log","handleCopy","eventType","handlePaste","handleRightClick","e","preventDefault","handleKeyDown","key","ctrlKey","includes","toLowerCase","metadata","onViolationLimitReached"],"sources":["C:/Project/Online_Test_Project/Front-End/online_test/src/hooks/useProctoring.js"],"sourcesContent":["import { useRef } from \"react\";\r\n\r\nconst useProctoring = (attemptId) => {\r\n  const violationCount = useRef(0);\r\n\r\n  const getBrowserMetadata = () => ({\r\n    userAgent: navigator.userAgent,\r\n    platform: navigator.platform,\r\n    language: navigator.language,\r\n    screenResolution: `${window.screen.width}x${window.screen.height}`,\r\n    onlineStatus: navigator.onLine,\r\n  });\r\n\r\n  useEffect(() => {\r\n    const handleFullscreenChange = () => {\r\n      if (!document.fullscreenElement) {\r\n        violationCount.current++;\r\n\r\n        logEvent(attemptId, \"FULLSCREEN_EXIT\", null, getBrowserMetadata());\r\n\r\n        checkViolationLimit();\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"fullscreenchange\", handleFullscreenChange);\r\n\r\n    return () =>\r\n      document.removeEventListener(\"fullscreenchange\", handleFullscreenChange);\r\n  }, []);\r\n\r\n//   useEffect(() => {\r\n//     const handleVisibilityChange = () => {\r\n//       if (document.visibilityState === \"hidden\") {\r\n//         violationCount.current++;\r\n\r\n//         logEvent(attemptId, \"FOCUS_LOST\", null, {\r\n//           visibilityState: document.visibilityState,\r\n//         });\r\n\r\n//         checkViolationLimit();\r\n//       }\r\n//     };\r\n\r\n//     document.addEventListener(\"visibilitychange\", handleVisibilityChange);\r\n\r\n//     return () =>\r\n//       document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\r\n//   }, []);\r\n\r\n  useEffect(() => {\r\n    const handleVisisbilityChange = () => {\r\n      if (document.hidden) {\r\n        violationCount.current++;\r\n\r\n        logEvent(attemptId, \"TAB_HIDDEN\", null, {\r\n          focusState: document.visibilityState,\r\n          timestamp: new Date().toISOString(),\r\n        });\r\n\r\n        logEvent(attemptId, \"FOCUS_LOST\", null, {\r\n          visibilityState: document.visibilityState,\r\n        });\r\n        checkViolationLimit();\r\n      } else {\r\n        logEvent(attemptId, \"TAB_VISIBLE\", null, {\r\n          timestamp: new Date().toISOString(),\r\n          focusState: document.visibilityState,\r\n        });\r\n        console.log(\"Tab_visible\");\r\n      }\r\n    };\r\n    document.addEventListener(\"visibilitychange\", handleVisisbilityChange);\r\n    return () => {\r\n      document.removeEventListener(\"visibilitychange\", handleVisisbilityChange);\r\n    };\r\n  }, []);\r\n\r\n\r\n\r\n   useEffect(() => {\r\n    const handleCopy = () => {\r\n      logEvent({ eventType: \"COPY_ATTEMPT\" });\r\n    };\r\n\r\n    const handlePaste = () => {\r\n      logEvent({ eventType: \"PASTE_ATTEMPT\" });\r\n    };\r\n\r\n    document.addEventListener(\"copy\", handleCopy);\r\n    document.addEventListener(\"paste\", handlePaste);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"copy\", handleCopy);\r\n      document.removeEventListener(\"paste\", handlePaste);\r\n    };\r\n  }, []);\r\n\r\n\r\n   useEffect(() => {\r\n    const handleRightClick = (e) => {\r\n      e.preventDefault();\r\n      logEvent({ eventType: \"RIGHT_CLICK_BLOCKED\" });\r\n    };\r\n\r\n    const handleKeyDown = (e) => {\r\n      // Block F12\r\n      if (e.key === \"F12\") {\r\n        e.preventDefault();\r\n        violationCount.current++;\r\n        logEvent({ eventType: \"DEVTOOLS_ATTEMPT\" });\r\n        checkViolationLimit();\r\n      }\r\n\r\n      // Block Ctrl+C, Ctrl+V, Ctrl+U\r\n      if (\r\n        e.ctrlKey &&\r\n        [\"c\", \"v\", \"u\", \"s\"].includes(e.key.toLowerCase())\r\n      ) {\r\n        e.preventDefault();\r\n        logEvent({\r\n          eventType: \"KEYBOARD_SHORTCUT_BLOCKED\",\r\n          metadata: { key: e.key },\r\n        });\r\n      }\r\n    };\r\n\r\n    document.addEventListener(\"contextmenu\", handleRightClick);\r\n    document.addEventListener(\"keydown\", handleKeyDown);\r\n\r\n    return () => {\r\n      document.removeEventListener(\"contextmenu\", handleRightClick);\r\n      document.removeEventListener(\"keydown\", handleKeyDown);\r\n    };\r\n  }, []);\r\n\r\n\r\n    const checkViolationLimit = () => {\r\n    if (violationCount.current >= 3) {\r\n      logEvent({\r\n        eventType: \"VIOLATION_LIMIT_REACHED\",\r\n      });\r\n\r\n      if (onViolationLimitReached) {\r\n        onViolationLimitReached();\r\n      }\r\n    }\r\n  };\r\n};\r\n\r\nexport default useProctoring;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}